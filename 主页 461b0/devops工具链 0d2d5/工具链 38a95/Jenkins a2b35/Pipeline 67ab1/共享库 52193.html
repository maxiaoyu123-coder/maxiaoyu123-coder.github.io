<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>共享库</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
}

.simple-table-header {
	background: rgb(247, 246, 243);
	color: black;
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="52193d6f-5c85-417d-adad-9abe4597eaf9" class="page sans"><header><h1 class="page-title">共享库</h1><table class="properties"><tbody><tr class="property-row property-row-created_time"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesCreatedAt"><path d="M6.98643729,14.0000972 C5.19579566,14.0000972 3.40419152,13.3106896 2.04245843,11.9323606 C-0.681017475,9.21200555 -0.680780251,4.76029539 2.04293482,2.04012507 C4.76664406,-0.68004331 9.22427509,-0.68004331 11.9480135,2.04013479 C13.272481,3.36277455 14,5.1330091 14,6.99552762 C14,8.87640182 13.2721894,10.6285043 11.9480135,11.9509302 C10.5679344,13.3105924 8.77756503,14.0000972 6.98643729,14.0000972 Z M10.2705296,7.00913883 L10.2705296,8.46099754 L10.2705296,8.65543362 L10.076181,8.65543362 L8.6543739,8.65543362 L5.72059514,8.65543362 L5.52619796,8.65543362 L5.52619796,8.46099754 L5.52619796,5.52541044 L5.52619796,3.37946773 L5.52619796,3.18502193 L5.72059514,3.18502193 L7.17253164,3.18502193 L7.36692883,3.18502193 L7.36692883,3.37946773 L7.36692883,6.81467358 L10.076181,6.81467358 L10.2705296,6.81467358 L10.2705296,7.00913883 Z M12.1601539,6.99552762 C12.1601539,5.61697497 11.6190112,4.32597154 10.6393933,3.34769528 C8.63253764,1.34336744 5.35197452,1.34061603 3.34153136,3.33944106 C3.33868273,3.34219247 3.33607716,3.34494388 3.33322852,3.34769528 C1.32397148,5.35459953 1.32372842,8.63641682 3.33322852,10.6433794 C5.34295224,12.6504489 8.62968901,12.6504489 10.6393933,10.6433794 C11.6190112,9.66506426 12.1601539,8.37408027 12.1601539,6.99552762 Z"></path></svg></span>Created</th><td><time>@May 1, 2021 7:12 PM</time></td></tr><tr class="property-row property-row-multi_select"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesMultipleSelect"><path d="M4,3 C4,2.447715 4.447715,2 5,2 L12,2 C12.5523,2 13,2.447716 13,3 C13,3.55228 12.5523,4 12,4 L5,4 C4.447715,4 4,3.55228 4,3 Z M4,7 C4,6.447715 4.447715,6 5,6 L12,6 C12.5523,6 13,6.447716 13,7 C13,7.55228 12.5523,8 12,8 L5,8 C4.447715,8 4,7.55228 4,7 Z M4,11 C4,10.447715 4.447715,10 5,10 L12,10 C12.5523,10 13,10.447716 13,11 C13,11.55228 12.5523,12 12,12 L5,12 C4.447715,12 4,11.55228 4,11 Z M2,4 C1.44771525,4 1,3.55228475 1,3 C1,2.44771525 1.44771525,2 2,2 C2.55228475,2 3,2.44771525 3,3 C3,3.55228475 2.55228475,4 2,4 Z M2,8 C1.44771525,8 1,7.55228475 1,7 C1,6.44771525 1.44771525,6 2,6 C2.55228475,6 3,6.44771525 3,7 C3,7.55228475 2.55228475,8 2,8 Z M2,12 C1.44771525,12 1,11.5522847 1,11 C1,10.4477153 1.44771525,10 2,10 C2.55228475,10 3,10.4477153 3,11 C3,11.5522847 2.55228475,12 2,12 Z"></path></svg></span>tag</th><td></td></tr><tr class="property-row property-row-text"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"></path></svg></span>Property</th><td></td></tr></tbody></table></header><div class="page-body"><nav id="f5cab696-f08f-4775-8b21-9b622746f697" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#6564fa82-28ea-4c11-a91c-389bb600dcfa">介绍</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#9c067b72-b926-466b-8790-235738d6d79d">Groovy的Package(包)与class(类)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#6a77be39-9540-49e7-a918-9e828ebeded7">目录结构</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5a12ac9a-1c60-4571-bbfb-09a13569db02">在Jenkins的&quot;配置&quot;中添加共享库</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b17e4177-1468-42f1-8353-766c2d79b501">引用共享库</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#66467442-9a5d-4273-9671-b8408210c5be">共享库中放了两种代码</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#9722aed1-1565-49ee-b18e-5c71f97d74fa">Pipeline中使用共享库中全局变量的步骤</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#712e4e9d-1bd8-4ffb-bb04-b3dc5b07da3f">在Pipeline中使用共享库中类的步骤</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#7b0d806d-ea16-44df-bda0-e0217153cb17">可归纳于共享库的代码</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5b51de69-8faf-41a0-9847-f68d91dd2b82">打印有颜色注释</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#fe7ea014-76eb-4960-8472-f41295b95fd6">httpRequest</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#8d8bc689-c30a-455b-ae96-133cc7645278">构建工具</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#64e18f17-cfa7-44cd-9411-eb3535428ed8">演示一个共享库</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#d4b6a91b-cdfd-4a7b-9dbd-d6048bac5ed9">准备工作</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#061045be-8441-462d-bd93-a32d849305d6">Jenkins上添加共享库</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#3b9d86dc-4553-4320-a1ac-32a9f43be0b0">在共享库中创建一个全局变量</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#386c77c9-389b-4c5a-90b5-29a048525fcf">创建一个pipeline</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e280e88c-08b8-461d-9a0f-7d9cea1f3bc0">参考</a></div></nav><h1 id="6564fa82-28ea-4c11-a91c-389bb600dcfa" class="">介绍</h1><p id="05e54b3b-7ff9-4b68-9db8-cec5df186568" class="">pipeline是代码，通常会有一些代码对于多个pipeline是通用的，为了实现代码块的复用，可将其托管在gitlab，使它被多个pipeline共用，这就叫共享库。</p><p id="cef68e0d-e6a7-4b64-8dac-2cafac48d3ab" class=""><mark class="highlight-orange">设想一个情境来进一步理解：For example, if you have a ten java microservices pipelines, the maven build step will be duplicated in all the 10 pipelines.And whenever a new service gets added, you will copy and paste the pipeline code again. Also, let say you want to change some parameter in the maven build step, you will have to do it all the pipelines manually. 针对这样的场景，我们就可以为</mark><mark class="highlight-orange"><strong>maven构建</strong></mark><mark class="highlight-orange">写一个共享库，这个共享库可以应用于所有的这些pipeline。</mark></p><h2 id="9c067b72-b926-466b-8790-235738d6d79d" class="">Groovy的Package(包)与class(类)</h2><p id="33831fef-315c-4244-8ff8-824d1145a0ca" class="">参考：<a href="https://docs.groovy-lang.org/latest/html/documentation/#_package_names">https://docs.groovy-lang.org/latest/html/documentation/#_package_names</a></p><p id="945e77bb-fdb8-4218-883e-54cb18580e3f" class="">一个包，与目录相似，包含很多文件，包名格式举例：<code>org.devops</code>, 转换成目录格式：<code>org/devops</code> ，在文件系统或gitlab中按此目录格式建立包</p><p id="c7ecf623-e9db-4a76-87ed-3f9dc0563de7" class="">包里面的文件称为类，类中首行须指定它的包名： <code>package org.devops</code> ，以此表示它属于包<code>org.devops</code> </p><h2 id="6a77be39-9540-49e7-a918-9e828ebeded7" class="">目录结构</h2><p id="a84c35b3-9003-4482-bbfb-f99daf4af871" class="">文件名后缀groovy，采用驼峰，每次pipeline加载时如果没有指定则默认克隆整个sharelibrary到workspace，所以如果太大会有一定影响</p><pre id="bc915a49-3467-4755-a551-1965989e502f" class="code code-wrap"><code>jenkins-shared-library
|____vars
|____src
|____resources</code></pre><ul id="b75d4d71-faa9-4b38-97f4-dacaec3b96c1" class="bulleted-list"><li style="list-style-type:disc">vars下的文件会以全局变量的形式，为Jenkins所引用，文件皆以.groovy后缀，在pipeline中以文件的名，在steps中，进行引用<ul id="071ac6b6-c9e2-4de3-a7bf-9381368e236e" class="bulleted-list"><li style="list-style-type:circle">除.groovy文件外，还有后缀.txt的文件，它用于解释说明同名.groovy文件的用途</li></ul></li></ul><hr id="5d54e1ed-ef5b-43df-b032-de9272cde2ff"/><h2 id="5a12ac9a-1c60-4571-bbfb-09a13569db02" class="">在Jenkins的&quot;配置&quot;中添加共享库</h2><p id="7a15431a-3529-4d74-a4ba-1de4d0600fab" class="">必选:<div class="indented"><ol type="1" id="76a9fa36-c83b-4545-a882-b876e08c7825" class="numbered-list" start="1"><li>Name</li></ol><ol type="1" id="3c701059-9685-4409-aa01-dce267769cb6" class="numbered-list" start="2"><li><strong>Default version</strong></li></ol><ol type="1" id="1d111b41-3dc4-47be-9991-816bc7fbbaac" class="numbered-list" start="3"><li><strong>Retrieval method</strong><ol type="a" id="20a53d65-e444-42e8-be44-dd7ab4037461" class="numbered-list" start="1"><li><strong>Source Code Management 设为 git</strong></li></ol><ol type="a" id="1082955a-fe2b-4bae-8559-ffb24a672fdd" class="numbered-list" start="2"><li>项目仓库</li></ol><ol type="a" id="5e7f862d-d738-47e9-85ba-67d5f39ee104" class="numbered-list" start="3"><li>凭据</li></ol><ol type="a" id="69983235-a4ab-470e-a21f-c6fa1d2205bd" class="numbered-list" start="4"><li></li></ol></li></ol></div></p><p id="cf82d4a0-75df-453f-a81b-7aa881c82590" class="">需要了解的选项:<div class="indented"><ol type="a" id="1456d39d-9e95-4e11-a112-7c4fca1e7699" class="numbered-list" start="1"><li><strong>Load implicitly  不要勾选, 它表示&quot;所有流水都自动&quot;</strong></li></ol><p id="2bc56579-fc40-466c-893f-91b76a436a94" class="">
</p></div></p><p id="cdda2aa5-dc4e-46ec-a865-614d5c833e7c" class="">
</p><h2 id="b17e4177-1468-42f1-8353-766c2d79b501" class="">引用共享库</h2><pre id="31a37254-e0ad-49f7-b883-7329b9e9e38e" class="code"><code>@Library(&#x27;共享库名字@分支名&#x27;) _     #类似于import一个package.*，导入共享库中所有的内容，下划线表示所有
</code></pre><h2 id="66467442-9a5d-4273-9671-b8408210c5be" class="">共享库中放了两种代码</h2><ul id="25138c28-4044-4e70-b0be-700a4e36a787" class="bulleted-list"><li style="list-style-type:disc">Steps<ul id="c3c79d2f-f1fe-4573-9f8e-a7fd6b2c0887" class="bulleted-list"><li style="list-style-type:circle">位于vars目录，Jenkins专用词为<strong>全局变量</strong>，在Pipeline当作自定义Step来使用<pre id="14b9168c-2bea-4c93-a721-a185a52389e7" class="code code-wrap"><code></code></pre></li></ul><ul id="a0e3555f-9ac7-45af-b63e-05f1d3e66b45" class="bulleted-list"><li style="list-style-type:circle">位于其他代码</li></ul></li></ul><ul id="0c0c7989-f34f-4f67-bddb-4ef2995bc8ee" class="bulleted-list"><li style="list-style-type:disc">函数</li></ul><p id="3e3f0aae-6536-4913-9c5e-617871afd80b" class="">
</p><h2 id="9722aed1-1565-49ee-b18e-5c71f97d74fa" class="">Pipeline中使用共享库中全局变量的步骤</h2><ol type="1" id="cd4ccb69-b8a4-4ba4-83ec-402ec2d95397" class="numbered-list" start="1"><li>在Gitlab中项目中，创建vars目录，创建Groovy文件, 编写脚本.<ul id="358c0c0d-1328-4b23-9435-567a9590876a" class="bulleted-list"><li style="list-style-type:disc"><code>def call(变量类型 变量名 = 默认值) {代码}</code></li></ul><figure id="9a4cf0b9-8536-4850-81e6-37abf15da10e" class="image"><a href="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled.png"><img style="width:528px" src="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled.png"/></a></figure></li></ol><ol type="1" id="e16400c5-8097-4a30-8156-29199a1fa378" class="numbered-list" start="2"><li>把共享库添加到Jenkins中<ul id="09fef8ac-c54b-416d-aabe-d48bdb078f41" class="bulleted-list"><li style="list-style-type:disc">在Jenkins中的&quot;系统配置&quot;</li></ul><ul id="5e0099fa-9561-4d34-a258-0614a1757fac" class="bulleted-list"><li style="list-style-type:disc">共享库名, pipeline引用</li></ul><ul id="8135de0f-c3d1-4c44-83e9-a49f0abd0001" class="bulleted-list"><li style="list-style-type:disc">git项目地址</li></ul><figure id="e4e07a6d-b985-4381-8b2d-18b93bc49b27" class="image"><a href="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%201.png"><img style="width:528px" src="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%201.png"/></a></figure></li></ol><ol type="1" id="d399b633-bc15-435b-99a8-20641fa0b815" class="numbered-list" start="3"><li>在Pipeline中引用,在行首位置引入<ul id="532403ef-4cdd-49f2-b793-9d4ff1cd2815" class="bulleted-list"><li style="list-style-type:disc">引入共享库名 <code>@Library(&#x27;库名@版本&#x27;) _</code></li></ul><ul id="b83e777c-f6a8-4884-b1ce-40666b34aaaf" class="bulleted-list"><li style="list-style-type:disc">引用共享变量 <code>groovy文件名(参数)</code></li></ul><figure id="48e465d7-ccb9-4c47-add6-a4caa4e73e51" class="image"><a href="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%202.png"><img style="width:528px" src="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%202.png"/></a></figure></li></ol><p id="ffc1f91e-a8ef-4375-9e5f-19cc38eeee64" class="">
</p><h2 id="712e4e9d-1bd8-4ffb-bb04-b3dc5b07da3f" class="">在Pipeline中使用共享库中类的步骤</h2><ol type="1" id="100ca20a-b4df-4414-8e07-4bc8b931f470" class="numbered-list" start="1"><li>所有在Gitlab中项目中，在&quot;src/定位&quot;路径下, 创建Groovy文件, 这个文件就是类<ul id="976cb646-679d-43d7-a09e-6e0a0fdb1b01" class="bulleted-list"><li style="list-style-type:disc">定位：src下的是类与包，两级目录表示包名，比如<code>org/devops</code>，包里面是类(以.groovy)</li></ul><ul id="5621354a-9f62-4c19-8e95-b01cb0f3733e" class="bulleted-list"><li style="list-style-type:disc">首行必须指定包名：<code>package 包名</code></li></ul><figure id="8d508f96-4225-4779-ad55-5885f78b4e81" class="image"><a href="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%203.png"><img style="width:528px" src="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%203.png"/></a></figure></li></ol><ol type="1" id="08280ab4-c740-4603-aa94-9d02850579b2" class="numbered-list" start="2"><li>把共享库添加到Jenkins中<ul id="1133dbd0-5ef8-41df-8ec8-ef2328a50ee6" class="bulleted-list"><li style="list-style-type:disc">在Jenkins中的&quot;系统配置&quot;</li></ul><ul id="8ed056c2-de9e-4c98-b833-ec4e315ab5fe" class="bulleted-list"><li style="list-style-type:disc">共享库名, 后面pipeline中会引入</li></ul><ul id="8351de80-a2b9-40a8-bee4-a2f882dd4703" class="bulleted-list"><li style="list-style-type:disc">git项目地址</li></ul><figure id="910d7cfd-7962-4085-853d-52cd7d190c54" class="image"><a href="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%201.png"><img style="width:1056px" src="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%201.png"/></a></figure></li></ol><ol type="1" id="565a3965-f796-47cf-a2fc-fea81d7e2030" class="numbered-list" start="3"><li>在Pipeline中引用类<ol type="a" id="d97a55d6-f27b-42ae-a855-9b94d74b8bf7" class="numbered-list" start="1"><li>指定共享库名： <code>@Library(&#x27;共享库名@版本&#x27;) _</code><p id="94164b7f-ecae-4df2-836b-b6517ad66d7a" class=""><code> _</code> 空格下划线表示把库里所有的东西都给我</p></li></ol><ol type="a" id="6ac307da-a9c2-4363-9a87-84a21596b171" class="numbered-list" start="2"><li>使用库中的类来创建对象： <code>def 对象名 = new org.devops.tools()</code>， <code>org.devops.tools</code>是类名，一定以<code>()</code>结尾</li></ol><ol type="a" id="89c6363c-7cef-42c0-9490-8333f8e7515d" class="numbered-list" start="3"><li>在script中，调用：<code>对象名.方法名</code> ，方法即类中的函数</li></ol><figure id="01218955-dfc8-4313-95f8-236d261d1ef6" class="image"><a href="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%204.png"><img style="width:720px" src="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%204.png"/></a></figure></li></ol><p id="419fe56e-04c3-4c18-90e4-5abf9eda39d8" class="">
</p><hr id="811a1f39-bad7-488e-b246-a7d291a97f83"/><h1 id="7b0d806d-ea16-44df-bda0-e0217153cb17" class="">可归纳于共享库的代码</h1><h3 id="5b51de69-8faf-41a0-9847-f68d91dd2b82" class="">打印有颜色注释</h3><ol type="1" id="3b8bb708-9c5f-4bf8-881e-23fb31f92e72" class="numbered-list" start="1"><li>前提条件：安装ansi插件</li></ol><ol type="1" id="922d88e3-7eb8-4969-9fd6-d73159189d72" class="numbered-list" start="2"><li>在gitlab上要有一个共享库项目</li></ol><ol type="1" id="590d16d0-abb9-4b7e-ba88-a06f50454948" class="numbered-list" start="3"><li>在Jenkins系统配置中加入共享库，比如名为<code>jenkinslib</code></li></ol><ol type="1" id="a19b4c96-236f-47ab-94b5-9bf95a26d503" class="numbered-list" start="4"><li>比如作为org.devops.tool类中的方法。路径：/src/org/devops/tools.groovy ，org/devops是定位，可自定义。<pre id="d754ff2c-ef42-4ac8-8117-392a196aad2c" class="code code-wrap"><code>package org.devops

//格式化输出
def PrintMes(value,color){
    colors = [&#x27;red&#x27;   : &quot;\033[40;31m &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;${value}&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; \033[0m&quot;,
              &#x27;blue&#x27;  : &quot;\033[47;34m ${value} \033[0m&quot;,
              &#x27;green&#x27; : &quot;[1;32m&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;${value}&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;[m&quot;,
              &#x27;green1&#x27; : &quot;\033[40;32m &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;${value}&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; \033[0m&quot; ]
    ansiColor(&#x27;xterm&#x27;) {
        println(colors[color])
    }
}</code></pre></li></ol><ol type="1" id="166a8000-cd92-4d5d-aeb6-6e2e041f71d8" class="numbered-list" start="5"><li>Jenkinsfile引用<pre id="72872bd6-ae7f-4a7a-b9d5-a0c73d90d52d" class="code code-wrap"><code>@Library(&#x27;jenkinslib@master&#x27;) _
def tools = new org.devops.tools()   
//new org.devops.tools() 表示引用tools文件
//org.devops.tools表示tools文件在src目录下的相对路径
//def tools，tools可自定义。

pipeline{
		agent any	
		stages {
		    stage(&#x27;pullCode&#x27;) {
		        steps{
		            script{tools.PrintMes(&#x27;pullCode&#x27;,&#x27;green&#x27;)}
								//tools.PrintMes引用函数
						...(省略)
						}
...(省略)
}</code></pre></li></ol><h3 id="fe7ea014-76eb-4960-8472-f41295b95fd6" class="">httpRequest</h3><ul id="a24c0d6e-7f29-42f2-b94d-412f7cbc8b2c" class="bulleted-list"><li style="list-style-type:disc">插件：http request</li></ul><pre id="1322e570-56ef-483f-b9fe-ff45accda03f" class="code code-wrap"><code>	def HttpReq(reqType,reqUrl,reqBody){
	    def gitServer = &quot;http://192.168.31.42/api/v4&quot;
	    withCredentials([string(credentialsId: &#x27;gitlab-token&#x27;, variable: &#x27;gitlabToken&#x27;)]) {
	        result = httpRequest customHeaders: [[maskValue: true, name: &#x27;PRIVATE-TOKEN&#x27;, value: &quot;${gitlabToken}&quot;]], 
	                    httpMode: reqType,
	                    contentType: &#x27;APPLICATION_JSON&#x27;,
	                    consoleLogResponseBody: true, 
	                    ignoreSslErrors: true, 
	                    requestBody: reqBody, 
	                    url: &quot;${gitServer}/${reqUrl}&quot;
	    }
	    return result
	}</code></pre><p id="4aad7da4-ae94-4da2-ba05-b4aca3d1dfee" class="">
</p><h3 id="8d8bc689-c30a-455b-ae96-133cc7645278" class="">构建工具</h3><ul id="baf673e4-233c-4e62-b746-b90b50cbdd9b" class="bulleted-list"><li style="list-style-type:disc">函数</li></ul><ul id="c34f39f0-7a1b-4ff4-87bd-ec8813fc3d57" class="bulleted-list"><li style="list-style-type:disc">用途: 封装maven/npm/gradle构建打包逻辑</li></ul><pre id="d1216a34-92d5-492f-b65e-1842b9a7ccc7" class="code code-wrap"><code>package org.devops  //根据定位修改

def build(buildType,buildShell){
    buildTools = [&quot;mvn&quot;:&quot;M3&quot;, &quot;ant&quot;:&quot;ANT&quot;, &quot;gradle&quot;:&quot;GRADLE&quot;, &quot;npm&quot;:&quot;NPM&quot;]
    buildHome = tool buildTools.mvn
    sh &quot;echo ${buildHome}/bin/${buildType} ${buildShell}&quot;
</code></pre><p id="caf07d28-8f77-4d9e-aae1-654ee3fd32da" class="">
</p><p id="e6e4cafc-a509-454e-9271-5ece7c3460cc" class="">
</p><p id="f19cfd8f-d2dc-436b-8523-1bcd7b08b0aa" class="">
</p><p id="79035de8-a589-4c39-939a-edbfe67e8d77" class="">
</p><h2 id="64e18f17-cfa7-44cd-9411-eb3535428ed8" class="">演示一个共享库</h2><h3 id="d4b6a91b-cdfd-4a7b-9dbd-d6048bac5ed9" class="">准备工作</h3><p id="323d158a-3cc5-4bc2-88ff-2a6243adf68e" class="">在gitlab上单独为共享库创建一个项目</p><p id="f9687701-97a3-4877-9631-ed2871ba8440" class="">在gitlab上再创建一个项目，用于作git拉取演示。</p><h3 id="061045be-8441-462d-bd93-a32d849305d6" class="">Jenkins上添加共享库</h3><p id="9c9bb830-20e6-4498-9cc1-b46868934e2e" class="">将这个共享库添加到Jenkins，在“configure system”中设置。</p><figure id="4e3065e7-07a4-473a-bac5-70bb945d12d3" class="image"><a href="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%205.png"><img style="width:816px" src="%E5%85%B1%E4%BA%AB%E5%BA%93%2052193/Untitled%205.png"/></a></figure><h3 id="3b9d86dc-4553-4320-a1ac-32a9f43be0b0" class="">在共享库中创建一个全局变量</h3><p id="fef3d922-ad3c-4cc4-a8b8-0c5d99dcb529" class="">可以创建一些全局变量，它们可以像step那样在pipeline中使用，下面演示创建一个<code>gitCheckout</code>，功能是可以从gitlab上拉取指定的项目分支。</p><ol type="1" id="eaa8cd83-90fd-4678-9283-4250044b1026" class="numbered-list" start="1"><li>在gitlab中创建共享库</li></ol><ol type="1" id="c52b3dcd-4468-42af-bd85-91c5beb030cb" class="numbered-list" start="2"><li>在共享库中创建名为<code>gitCheckout</code>的文件<p id="2620caca-9ce9-47b6-8655-f64e32adadb0" class="">两个需要注意的地方：首先在<code>vars</code>目录下创建一个文件<code>gitCheckout.groovy</code>，文件名<code>gitCheckout</code>就是step名，在pipeline的<code>steps</code>中引用<code>gitCheckout</code>，文件名字必须全小写或驼峰。然后是必须使用<code>call</code>方法，官方解释是call method allows the global variable to be invoked in a manner similar to a step。</p></li></ol><pre id="a05142af-da96-4550-b849-d065d57b57bf" class="code code-wrap"><code>def call(Map stageParams){
    checkout([
    	$class: &#x27;GitSCM&#x27;, 
    	branches: [[name: stageParams.branch]], 
    	extensions: [], 
    	userRemoteConfigs: [[
    		credentialsId: &#x27;86a7bea6-49ae-4b60-9540-f1c35abf9965&#x27;, 
    		url: stageParams.url
    	]]
    ])
}</code></pre><ul id="76f72336-8e78-4307-a6c1-7c0391bd2d30" class="bulleted-list"><li style="list-style-type:disc"><code>call(Map stageParams)</code>里的两个参数是用来作什么的？
<mark class="highlight-red"><code>Map</code></mark>表示后面<code>stageParams</code>是一个Map类型的参数，这样，我们在调用时就可以向<code>gitCheckout</code>传递两个键值对参数，<code>stageParams.branch</code> 和<code>stageParams.url。</code>除了Map类型，还有string类型。</li></ul><h3 id="386c77c9-389b-4c5a-90b5-29a048525fcf" class="">创建一个pipeline</h3><p id="58e1aab9-5126-4edb-8974-694b0b5a8c18" class="">创建一个申明式pipeline，使用共享库中的<code>gitCheckout</code>，它将为此pipeline提取项目代码。</p><pre id="d3dd94f5-9af4-42ac-978a-873293c54b9f" class="code code-wrap"><code>@Library(&#x27;jenkinslib@master&#x27;) _

pipeline{
    agent any
    stages{
        stage(&#x27;拉取代码&#x27;){
            steps{
                gitCheckout(
                    branch: &quot;master&quot;, 
                    url: &quot;http://192.168.31.42/root/simple-microservice.git&quot;
                )
            }
        }
    }
}</code></pre><ul id="78c13537-ef9d-4ccb-b13d-a80294b376d7" class="toggle"><li><details open=""><summary><code>@Library(&#x27;jenkinslib@master&#x27;) _</code>指明这个pipeline需要访问哪个共享库，可以看到pipeline会先去加载共享库。</summary><pre id="4a3095a2-77fc-4311-8de8-7371e6aa34c2" class="code code-wrap"><code>Loading library jenkinslib@master
Attempting to resolve master from remote references...
 &gt; git --version # timeout=10
 &gt; git --version # &#x27;git version 1.8.3.1&#x27;
using GIT_ASKPASS to set credentials 
 &gt; git ls-remote -h http://192.168.31.42/root/jenkinslib.git # timeout=10
Found match: refs/heads/master revision 27ac0ad9b87a90af29418f41de8028a372d7519a
The recommended git tool is: NONE
using credential 86a7bea6-49ae-4b60-9540-f1c35abf9965
Cloning the remote Git repository
Cloning with configured refspecs honoured and without tags
Cloning repository http://192.168.31.42/root/jenkinslib.git
 &gt; git init /var/lib/jenkins/workspace/test-sharelibrary@libs/jenkinslib # timeout=10
Fetching upstream changes from http://192.168.31.42/root/jenkinslib.git
 &gt; git --version # timeout=10
 &gt; git --version # &#x27;git version 1.8.3.1&#x27;
using GIT_ASKPASS to set credentials 
 &gt; git fetch --no-tags --progress http://192.168.31.42/root/jenkinslib.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 &gt; git config remote.origin.url http://192.168.31.42/root/jenkinslib.git # timeout=10
 &gt; git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10</code></pre></details></li></ul><ul id="2a41bf77-2e45-4ab6-88da-b25cc00e8db7" class="bulleted-list"><li style="list-style-type:disc">使用文件名<code>gitCheckout</code>来调用我们刚才在<code>vars</code>目录下创建<code>gitCheckout.groovy</code>文件。</li></ul><p id="b25797be-4952-472e-858c-ffc288e3bf52" class="">
</p><p id="8d0d979a-a374-434c-a0eb-856bc6975d5d" class="">总结：所有的pipeline都可以调用这个共享库中的<code>gitCheckout</code>函数，实现代码的复用。</p><p id="b14b9846-b7fc-4c6d-854d-27a2f041c664" class="">
</p><p id="2e861fc0-b8d5-4ab7-9e72-29f4fdac7d5c" class="">
</p><p id="8b0f42b1-e151-4de7-9e32-79283f4dcd31" class="">
</p><h2 id="e280e88c-08b8-461d-9a0f-7d9cea1f3bc0" class="">参考</h2><figure id="6c4d5718-5a3d-464f-86ec-194cb078e6c8"><a href="https://www.jenkins.io/blog/2020/10/21/a-sustainable-pattern-with-shared-library/" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">A sustainable pattern with shared library</div><div class="bookmark-description">Published on 2020-10-21 by Tomas Bjerre This post will describe how I use a shared library in Jenkins. Typically when using multibranch pipeline. If possible (if not forced to) I implement the pipelines without multibranch. I previously wrote about how I do that with my Generic Webhook Trigger Plugin in a previous post.</div></div><div class="bookmark-href"><img src="https://www.jenkins.io/favicon.ico" class="icon bookmark-icon"/>https://www.jenkins.io/blog/2020/10/21/a-sustainable-pattern-with-shared-library/</div></div><img src="https://www.jenkins.io/images/avatars/tomasbjerre.jpg" class="bookmark-image"/></a></figure><p id="e0ef9596-bf3a-427e-8110-e2c7a5d75261" class="">
</p></div></article></body></html>